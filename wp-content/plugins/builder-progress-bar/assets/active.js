((e,t,r)=>{"use strict";e.ModuleProgressbar=class extends e.Module{constructor(e){let t=e.mod_settings?.progress_bars;t&&!Array.isArray(t)&&(e.mod_settings.progress_bars=Object.values(t)),super(e)}static getOptions(){return[{id:"mod_title_progressbar",type:"title"},{id:"progress_bars",type:"builder",options:[{id:"bar_label",type:"text",label:"label",class:"large",control:{selector:".tb-progress-bar-label"}},{id:"bar_percentage",type:"range",label:"percent",units:{"%":""},class:"small",default:80},{id:"bar_percentage_from",type:"number",label:"prg_pf",after:"integer"},{id:"bar_percentage_label",type:"text",label:"prg_pl",binding:{empty:{hide:"bar_percentage_only_label_wrap"},not_empty:{show:"bar_percentage_only_label_wrap"}}},{id:"bar_percentage_only_label",type:"checkbox",label:"",options:[{name:"yes",value:"prg_pe"}],wrap_class:"bar_percentage_only_label_wrap"},{id:"bar_color",type:"color",label:"c",default:"#4a54e6"}]},{id:"hide_percentage_text",type:"toggle_switch",label:"prg_pt"},{type:"custom_css_id",custom_css:"add_css_progressbar"}]}static getGroup(){return["addon"]}static default(){return{progress_bars:[{bar_label:r.i18n.label.label}]}}static builderSave(e){let t=e.progress_bars,r=!1;if("no"===e.hide_percentage_text?delete e.hide_percentage_text:r=!0,t?.length>0)for(let e=t.length-1;e>-1;--e){let a=t[e];!0===r&&delete a.bar_percentage_label,a.bar_percentage_label&&a.bar_percentage_only_label&&"|"!==a.bar_percentage_only_label||delete a.bar_percentage_only_label,(!0===r||a.bar_percentage_label&&a.bar_percentage_only_label)&&delete a.bar_percentage_from,"80"===a.bar_percentage?.toString()&&delete a.bar_percentage,"#4a54e6"===a.bar_color&&delete a.bar_color}else delete e.progress_bars;super.builderSave(e)}preview(r){const a=t("","module module-progressbar"),l=t("","tb-progress-bar-wrap"),s=r.progress_bars||[],p=!r.hide_percentage_text||"no"===r.hide_percentage_text,b=this.constructor;r.add_css_progressbar&&(a.className+=" "+r.add_css_progressbar);for(let r=0;r<s.length;++r){let a=s[r],_=a.bar_color||"#4a54e6",o=a.bar_percentage??80,n=t("","tb-progress-bar tf_textl tf_rel tb_is_repeat"),c=t("span",{class:"tb-progress-bar-label tf_w","data-repeat":"progress_bars","data-index":r}),d=t("span",{class:"tb-progress-bar-bg","data-percent":o});if(d.style.width=0,d.style.backgroundColor=e.Helper.toRGBA(_),p){let{bar_percentage_from:e,bar_percentage_label:r}=a;d.appendChild(t("span",{class:"tb-progress-tooltip tf_textr","data-to":"yes"===a.bar_percentage_only_label&&r?"":e?e*o/100:o,"data-suffix":r?" "+r.trim():"%"}))}n.append(b.setEditableContent(c,"bar_label",a.bar_label),d),l.appendChild(n)}return r.mod_title_progressbar&&a.appendChild(b.getModuleTitle(r.mod_title_progressbar,"mod_title_progressbar")),a.appendChild(l),a}}})(tb_app,tb_createElement,themifyBuilder);