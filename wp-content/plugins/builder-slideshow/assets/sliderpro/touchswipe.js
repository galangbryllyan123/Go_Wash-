var TfSliderProTouchSwipe;(t=>{"use strict";TfSliderProTouchSwipe=class{slider;touchStartPoint={x:0,y:0};touchDistanceX;touchStartPosition=0;allowOppositeScrolling=!0;isMoved;constructor(t){this.slider=t,t.tfOn("init",(()=>{this.init()}),{passive:!0,once:!0})}init(){const t=this,i=t.slider;i.settings.touchSwipeThreshold??=50,i.slidesMaskEl.tfOn("pointerdown",(s=>{i.dispatchEvent("lazyPreload",{index:i.currentIndex+1,preload:!0}),0===s.button&&s.isTrusted&&!0!==i.swipeDisable&&t.t(s)}),{passive:!0}).tfOn("dragstart",(t=>{t.preventDefault()}))}t(t){const i=this,s=i.slider,e=s.getSlidesPosition().left,o=t=>{i.i(t)},n=t=>{t.target?.closest("a")&&t.preventDefault()};t.target.classList.contains("sp-selectable")||(i.touchStartPoint.x=t.pageX,i.touchStartPoint.y=t.pageY,i.touchStartPosition=e,i.isMoved=!1,i.touchDistanceX=0,s.slidesEl.classList.contains("sp-animated")&&s.stopMovement(),s.slidesMaskEl.tfOn("pointerup",(t=>{t.currentTarget.tfOff("pointermove",o,{passive:!0}).tfOff("click",n),i.o()}),{passive:!0,once:!0}).tfOn("pointermove",o,{passive:!0}).tfOn("click",n),s.sliderEl.classList.add("bsp_swiping_start"))}i(i){let s=this,e=s.slider,o=e.currentIndex,n=s.touchStartPosition,r=i.pageX-s.touchStartPoint.x,a=e.slidesPosition,p=e.getTotalSlides();if(s.touchDistanceX=r,t.abs(r)>t.abs(i.pageY-s.touchStartPoint.y))s.allowOppositeScrolling=!1;else if(!0===s.allowOppositeScrolling)return;!1===s.isMoved&&(s.isMoved=!0,e.sliderEl.classList.add("bsp_swiping"),i.currentTarget.setPointerCapture(i.pointerId)),!1===e.settings.loop&&(a>n&&0===o||a<n&&o===p-1)&&(r*=.2);let c=n+r,l=!0!==e.settings.loop&&t.abs(c)-t.abs(n)>0?1:0,d=t.abs(parseInt(c/e.slideWidth))+l;d>=p&&(d=p),e.slides[d]&&e.lazyLoading.load(e.slides[d],!0),e.moveTo(c,!0)}o(){const i=this,s=i.slider,e=s.sliderEl.classList,o=s.settings,n=i.touchDistanceX,r=-parseInt(s.slides[s.currentIndex].style.left,10);if(i.allowOppositeScrolling=!0,setTimeout((()=>{e.remove("bsp_swiping_start")}),100),!0===i.isMoved)if(e.remove("bsp_swiping"),t.abs(n)<o.touchSwipeThreshold)s.moveTo(r);else{let t=s.slideWidth,i=o.slideDistance,e=s.slidesOrder,a=s.getTotalSlides(),p=s.currentIndex,c=(!0===o.rightToLeft?-1:1)*n/(t+i);c=parseInt(c,10)+(c>0?1:-1);let l=e.indexOf(p)-c;l<0?l=e.indexOf(0):l>=a&&(l=e.indexOf(a-1));const d=e[l];void 0===d||p===d?s.moveTo(r):s.gotoSlide(d)}}}})(Math);