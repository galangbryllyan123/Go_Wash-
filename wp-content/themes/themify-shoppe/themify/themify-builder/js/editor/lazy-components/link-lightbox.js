var TB_Link_Lightbox;((t,i,e,s,o,_,a,l,c)=>{"use strict";var r,n,b;(TB_Link_Lightbox={init(){(i.isFrontend?window.top:window).document.tfOn("click",(async t=>{t.target.classList.contains("tb_add_link")&&(b=t.target.closest('[data-type="url"]'),this.showLightbox())}))},async load(t=1,e=""){i.Spinner.showLoader();try{return await i.LocalFetch({action:"tb_get_pages",page:t,s:e},"html")}catch(t){throw i.Spinner.showLoader("error"),t}},async showLightbox(){const t=i.isFrontend?window.top:window;if(r=t.document.tfClass("tb_link_lightbox")[0])n.classList.remove("tf_hide"),r.classList.remove("tf_hide");else{t.Themify.loadCss(e.builder_url+"css/editor/components/import"),n=s("div",{class:"tb_lightbox_overlay"}),r=s("div",{class:"tb_import_post_lightbox tb_link_lightbox"});const o=s("div",{class:"tb_lightbox_top_bar"}),_=s("div",{class:"tb_lightbox_container tf_scrollbar"}),a=s("div",{class:"tb_import_result"}),l=s("div",{class:"tb_import_search_wrap"}),h=s("input",{placeholder:c.search}),d=s("div",{class:"tb_close_lightbox tf_close"}),p=s("span"),g=async(t=1,e="")=>{i.Spinner.showLoader();const s=await this.load(t,e);_.tfClass("tb_import_result")[0].replaceWith(s),i.Spinner.showLoader("done")};p.textContent=c.cancel,d.appendChild(p),o.appendChild(d),l.appendChild(h),_.append(l,a),r.append(o,_),t.document.body.append(n,r),g(),d.tfOn("click",(()=>{this.close()})),h.tfOn("keyup",(t=>{g(1,h.value)}),{passive:!0}),r.tfOn("click",(t=>{const i=t.target;if(t.preventDefault(),i?.dataset.permalink){b.querySelector('input[type="url"]').value=i.dataset.permalink,this.close()}else"A"===i?.tagName&&i.classList.contains("page-numbers")&&g(i.textContent,h.value)}))}return r},close(){r.classList.add("tf_hide"),n.classList.add("tf_hide")}}).init()})(document,tb_app,Themify,tb_createElement,tb_createDocumentFragment,themifyBuilder,0,0,themifyBuilder.i18n.label);